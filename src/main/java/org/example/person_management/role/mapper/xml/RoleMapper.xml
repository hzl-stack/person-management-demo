<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.example.person_management.role.mapper.RoleMapper">
    <select id="selectRoleListPage" resultType="org.example.person_management.role.entity.vo.RoleBackVo">
        select
            role.id,
            role.user_codes,
            role.role,
            role.perm_pids,
            org.code org_code,
            org.title org_title,
            org.pid super_org_code
        from t_role role JOIN t_org org ON role.org = org.code
        where role.dr = 0 and org.dr = 0
        <if test="vo.org != null">
            AND role.org = #{vo.org}
        </if>
        <if test="vo.order == 1">
            ORDER BY role.insert_dt
        </if>
        <if test="vo.order != 1">
            ORDER BY role.insert_dt DESC
        </if>
    </select>
</mapper>
